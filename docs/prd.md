# 证书生命周期管理系统 Product Requirements Document (PRD)

## Goals and Background Context

### Goals

- 减少证书管理人工成本，在系统部署后6个月内将证书管理相关的人工工作量减少70%
- 提高业务连续性，在系统部署后第一个季度内将因证书过期导致的服务中断事件减少到零
- 优化资源分配，将IT运维团队从证书管理任务中解放出来的时间重新投入到更高价值的活动中
- 降低运营风险，通过自动化和标准化流程，减少人为错误导致的安全风险
- 提高合规性，确保证书管理流程100%符合行业安全标准和内部政策要求

### Background Context

当前企业面临严重的证书管理挑战，特别是在管理100个以上证书的复杂环境中。手动检查每个域名的证书到期时间并手动更新，过程耗时且容易出错，证书过期导致服务中断，严重影响业务连续性和用户体验。缺乏统一的证书视图和多团队协作流程繁琐，使得证书管理效率低下且存在安全隐患。

证书生命周期管理系统是一个全面的自动化解决方案，旨在彻底改变企业证书管理方式。该系统通过集成监控、预警、管理和自动化部署功能，为企业提供一站式证书管理平台，解决当前证书管理的核心痛点，确保业务连续性和安全性。

### Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-08-11 | 1.0 | 初始PRD文档创建 | John (PM) |

## Requirements

### Functional

- FR1: 证书信息管理 - 提供证书信息的完整管理功能，支持手动添加、编辑、删除和查看证书信息，包括证书名称、域名、颁发机构、到期日期、证书类型等关键元数据
- FR2: 证书监控和预警 - 每小时自动检查清单中所有证书的到期时间，在证书即将过期时（30天、15天、7天、1天）通过邮件和短信发送预警，系统仅维护证书元数据，不维护证书文件
- FR3: 统一管理界面 - 提供Web界面，集中显示所有证书的状态（正常、即将过期、已过期）、到期时间和其他关键信息，支持搜索、筛选和排序功能
- FR4: 预警通知 - 系统按照预设的预警规则（30天、15天、7天、1天）自动发送证书过期预警，支持邮件和短信通知渠道

### Non Functional

- NFR1: 平台兼容性 - 系统应支持主流操作系统，包括Linux（Ubuntu 20.04+、CentOS 8+）、Windows Server 2019+和macOS
- NFR2: 浏览器兼容性 - Web界面应支持现代浏览器，包括Chrome 90+、Firefox 88+、Safari 14+和Edge 90+，确保跨平台兼容性
- NFR3: 性能要求 - 系统应能够支持同时管理1000+证书而不影响性能，证书状态检查响应时间不超过2秒，系统启动时间不超过30秒
- NFR4: 安全性 - 采用HTTPS加密通信，使用Spring Security框架确保系统访问安全
- NFR5: 数据保护 - 证书元数据应安全存储，系统操作记录详细审计日志，满足合规要求
- NFR6: 可用性 - 系统可用性达到99%，确保证书管理服务的可靠性，平均故障恢复时间(MTTR)不超过30分钟
- NFR7: 可扩展性 - 架构设计支持企业级扩展，能够应对证书数量的增长，支持横向扩展

## User Interface Design Goals

### Overall UX Vision

证书生命周期管理系统的UX愿景是提供一个简洁、直观且高效的用户界面，使IT运维团队能够轻松管理企业中的所有证书。系统设计将以用户为中心，专注于减少操作步骤，提供清晰的信息展示，并通过自动化功能减轻用户的工作负担。界面将采用现代化的设计语言，确保用户能够快速上手并高效完成证书管理任务。

### Key Interaction Paradigms

- **直观导航**：采用清晰的导航结构，使用户能够轻松在不同功能模块之间切换
- **快速操作**：提供快捷方式和批量操作功能，减少用户的点击次数和操作时间
- **实时反馈**：用户操作后提供即时的视觉反馈，确认操作成功或失败
- **智能提示**：在关键操作点提供上下文相关的帮助信息，引导用户正确操作
- **响应式设计**：界面能够适应不同屏幕尺寸，确保在各种设备上都有良好的使用体验

### Core Screens and Views

- **证书列表页**：展示所有证书的核心信息，包括证书名称、域名、颁发机构、到期日期和状态，支持搜索、筛选和排序功能
- **证书详情页**：展示单个证书的完整信息，包括所有元数据和历史记录，提供编辑和删除操作
- **添加/编辑证书页**：提供表单界面，用于添加新证书或编辑现有证书信息
- **预警通知中心**：集中展示所有证书过期预警，按紧急程度排序，提供快速处理入口
- **系统仪表板**：提供系统整体状态的概览，包括证书统计、预警统计和系统健康状态

### Accessibility: WCAG AA

系统将遵循Web内容可访问性指南(WCAG) AA级标准，确保所有用户，包括有视觉、听觉或运动障碍的用户，都能够有效使用系统。具体包括：提供足够的颜色对比度、支持键盘导航、为图片提供替代文本、确保界面组件可被辅助技术正确识别等。

### Branding

系统将采用企业级的专业设计风格，以蓝色和白色为主色调，传达安全、可靠和专业的品牌形象。界面设计将保持简洁明了，避免过度装饰，确保用户能够专注于证书管理任务。图标和视觉元素将采用一致的设计语言，增强用户对系统的信任感。

### Target Device and Platforms: Web Responsive

系统将采用响应式Web设计，优先支持桌面浏览器使用，同时确保在平板设备上也有良好的使用体验。主要支持的浏览器包括Chrome 90+、Firefox 88+、Safari 14+和Edge 90+。系统不专门针对移动设备进行优化，但基本功能在移动浏览器上仍可访问。

## Technical Assumptions

### Repository Structure: Monorepo

采用Monorepo结构，将前端和后端代码放在同一个代码仓库中管理。这种结构便于统一版本控制、依赖管理和CI/CD流程，特别适合中小型团队开发。代码组织将遵循领域驱动设计(DDD)原则，分为以下主要目录：
- `frontend/`: Vue.js前端应用代码
- `backend/`: Spring Boot后端应用代码
- `shared/`: 共享代码和工具库
- `docs/`: 项目文档
- `docker/`: Docker配置文件
- `scripts/`: 构建和部署脚本

### Service Architecture

采用单体应用架构，使用Spring Boot框架构建，基于领域驱动设计(DDD)模式组织代码。这种架构适合MVP阶段的快速开发和部署，同时为未来的微服务迁移预留可能性。系统将包含以下核心服务模块：
- **证书管理服务**：负责证书信息的CRUD操作
- **监控服务**：负责定期检查证书到期时间
- **预警服务**：负责发送证书过期预警通知
- **用户界面服务**：提供Web界面和API接口

系统将采用分层架构，包括：
- **表现层**：处理HTTP请求和响应
- **应用层**：实现业务用例和协调领域对象
- **领域层**：包含核心业务逻辑和领域模型
- **基础设施层**：提供技术支持和外部集成

### Testing Requirements

采用单元测试和集成测试相结合的测试策略，确保系统的稳定性和可靠性。测试要求包括：
- **单元测试覆盖率**：核心业务逻辑的单元测试覆盖率达到80%以上
- **集成测试**：关键业务流程的集成测试，包括证书管理、监控和预警功能
- **API测试**：所有REST API的测试，确保接口正确性和稳定性
- **UI测试**：关键用户界面的端到端测试，确保用户体验
- **性能测试**：系统性能测试，确保满足非功能性需求中的性能指标

测试将使用以下工具和框架：
- **JUnit**: Java单元测试框架
- **Mockito**: 模拟对象框架
- **Spring Test**: Spring Boot测试支持
- **Jest**: JavaScript测试框架
- **Vue Test Utils**: Vue组件测试工具
- **Selenium**: Web UI自动化测试

### Additional Technical Assumptions and Requests

- **数据库设计**：使用MySQL作为主数据库，设计规范化的数据表结构存储证书信息和系统配置
- **缓存策略**：使用Redis作为缓存层，提高证书查询和系统性能
- **消息队列**：使用RabbitMQ处理异步任务，如证书监控和预警通知
- **日志管理**：采用结构化日志，使用ELK Stack(Elasticsearch, Logstash, Kibana)进行日志收集和分析
- **监控和告警**：集成Prometheus和Grafana进行系统监控和告警
- **安全措施**：采用HTTPS加密通信，使用JWT进行API认证，敏感数据加密存储
- **部署方式**：使用Docker容器化部署，支持在Kubernetes环境中运行
- **CI/CD流程**：使用GitLab CI/CD实现自动化构建、测试和部署
- **开发环境**：统一使用IntelliJ IDEA作为开发IDE，遵循统一的代码规范和格式
- **文档要求**：使用Swagger生成API文档，使用Markdown编写技术文档和用户手册

## Epic List

- **Epic 1: 基础设施与核心功能** - 建立项目基础架构，实现证书信息的完整管理功能，包括证书的添加、编辑、删除和查看操作，为系统提供坚实的数据基础
- **Epic 2: 证书监控与预警** - 实现证书的自动监控和预警通知功能，定期检查证书到期时间并在即将过期时通过邮件和短信发送预警，确保证书不会意外过期
- **Epic 3: 用户界面完善** - 完善统一管理界面，提供证书状态展示、搜索筛选和排序功能，优化用户体验，使证书管理更加高效和直观

## Epic 1 基础设施与核心功能

建立项目基础架构，实现证书信息的完整管理功能，包括证书的添加、编辑、删除和查看操作，为系统提供坚实的数据基础。这个史诗将为后续的监控和预警功能奠定基础，确保系统能够有效管理和存储证书数据。

### Story 1.1 项目基础设施搭建

As a 开发人员,
I want 搭建项目的基础架构和开发环境,
so that 为后续功能开发提供稳定和标准化的基础.

**Acceptance Criteria:**
1: 创建项目的基本目录结构，包括前端、后端、共享代码和配置文件
2: 配置开发环境和构建工具，包括Maven/Node.js构建脚本
3: 设置Git版本控制和代码规范，包括.gitignore和代码风格配置
4: 搭建基础的Spring Boot后端框架，包括数据库连接和基本配置
5: 搭建基础的Vue.js前端框架，包括路由和状态管理
6: 设置基础的CI/CD流程，包括自动化构建和测试
7: 生成项目文档，包括开发指南和部署说明

### Story 1.2 简化数据模型设计

As a 系统开发人员,
I want 设计证书的基本数据模型,
so that 系统能够存储和管理证书信息.

**Acceptance Criteria:**
1: 设计证书实体的基本数据模型，包括证书名称、域名、颁发机构、到期日期、证书类型等字段
2: 设计简单的数据库表结构，包括主表和必要字段
3: 定义字段的基本数据类型和约束
4: 创建基本的SQL脚本，用于数据库表创建
5: 设计基本的CRUD操作接口
6: 验证数据模型的基本完整性

### Story 1.3 核心证书管理API

As a 后端开发人员,
I want 实现证书管理的核心API,
so that 提供证书数据的基本操作功能.

**Acceptance Criteria:**
1: 实现证书信息创建API，支持添加新证书
2: 实现证书信息读取API，支持查询单个和多个证书
3: 实现证书信息更新API，支持修改证书信息
4: 实现证书信息删除API，支持删除证书记录
5: 实现证书列表查询API，支持基本的分页和排序
6: 添加基本的API输入验证
7: 添加基本的错误处理机制
8: 编写API的单元测试

### Story 1.4 基础证书状态计算

As a 系统开发人员,
I want 实现证书状态的基本计算功能,
so that 系统能够判断证书的有效性状态.

**Acceptance Criteria:**
1: 实现证书状态计算逻辑，包括正常、即将过期、已过期等状态
2: 定义基本的状态判断规则，如到期前30天为"即将过期"
3: 在API响应中包含证书状态信息
4: 实现基于状态的证书筛选功能
5: 编写状态计算功能的单元测试
6: 验证状态计算的基本准确性

### Story 1.5 基础前端界面框架

As a 前端开发人员,
I want 实现基础的前端界面框架,
so that 为后续界面开发提供基础.

**Acceptance Criteria:**
1: 实现基本的页面布局和导航结构
2: 创建基础的页面组件，包括列表页、详情页、添加页和编辑页的框架
3: 实现基本的路由配置，支持页面导航
4: 添加基本的HTTP请求封装，支持API调用
5: 实现基本的表单组件和验证机制
6: 添加基本的加载状态和错误提示组件
7: 确保界面在桌面浏览器上的基本可用性
8: 编写前端组件的单元测试

## Epic 2 证书监控与预警

实现证书的自动监控和预警通知功能，定期检查证书到期时间并在即将过期时通过邮件和短信发送预警，确保证书不会意外过期。这个史诗将为系统添加主动监控能力，帮助用户提前了解证书状态，避免因证书过期导致的服务中断。

### Story 2.1 证书监控服务设计

As a 后端开发人员,
I want 设计和实现证书监控服务,
so that 系统能够自动检查证书的到期时间.

**Acceptance Criteria:**
1: 设计证书监控服务的架构和接口
2: 实现证书到期时间检查逻辑
3: 配置定时任务，每小时自动执行证书检查
4: 实现检查结果的处理和存储机制
5: 添加监控服务的日志记录和错误处理
6: 实现监控服务的启停控制
7: 编写监控服务的单元测试和集成测试
8: 验证监控服务的性能和可靠性

### Story 2.2 预警规则引擎

As a 系统开发人员,
I want 实现预警规则引擎,
so that 系统能够根据预设规则判断是否需要发送预警.

**Acceptance Criteria:**
1: 实现预警规则的配置和管理功能
2: 支持基于时间点的预警规则（如30天、15天、7天、1天）
3: 实现规则匹配和判断逻辑
4: 添加规则的优先级处理机制
5: 实现规则的测试和验证功能
6: 编写规则引擎的单元测试
7: 验证规则引擎的准确性和性能

### Story 2.3 邮件通知服务

As a 后端开发人员,
I want 实现邮件通知服务,
so that 系统能够通过邮件发送证书过期预警.

**Acceptance Criteria:**
1: 实现邮件发送功能，支持SMTP协议
2: 设计邮件模板，包括证书信息和预警内容
3: 实现邮件接收人配置和管理
4: 添加邮件发送队列和重试机制
5: 实现邮件发送状态跟踪和日志记录
6: 添加邮件发送失败的错误处理
7: 编写邮件服务的单元测试和集成测试
8: 验证邮件发送的可靠性和及时性

### Story 2.4 短信通知服务

As a 后端开发人员,
I want 实现短信通知服务,
so that 系统能够通过短信发送证书过期预警.

**Acceptance Criteria:**
1: 集成短信服务提供商API，实现短信发送功能
2: 设计短信内容模板，确保证书信息简洁明了
3: 实现短信接收人配置和管理
4: 添加短信发送队列和重试机制
5: 实现短信发送状态跟踪和日志记录
6: 添加短信发送失败的错误处理
7: 编写短信服务的单元测试和集成测试
8: 验证短信发送的可靠性和及时性

### Story 2.5 预警中心界面

As a 前端开发人员,
I want 实现预警中心用户界面,
so that 用户可以查看和管理证书预警信息.

**Acceptance Criteria:**
1: 实现预警列表页面，展示所有预警信息
2: 实现预警详情页面，展示单个预警的完整信息
3: 添加预警状态展示（如未读、已读、已处理）
4: 实现预警筛选和排序功能
5: 添加预警标记为已读/已处理的功能
6: 实现预警统计和概览信息
7: 添加预警设置的配置界面
8: 编写前端单元测试和集成测试

## Epic 3 用户界面完善

完善统一管理界面，提供证书状态展示、搜索筛选和排序功能，优化用户体验，使证书管理更加高效和直观。这个史诗将提升系统的可用性和用户友好性，确保用户能够轻松完成证书管理任务。

### Story 3.1 证书列表基础功能

As a 前端开发人员,
I want 实现证书列表的基础展示和基本操作功能,
so that 用户能够查看和管理证书信息.

**Acceptance Criteria:**
1: 实现证书列表页面，展示证书名称、域名、颁发机构、到期日期和状态
2: 实现证书列表的基本排序功能，支持按到期日期和状态排序
3: 实现证书列表的基本筛选功能，支持按状态筛选
4: 实现证书列表的分页功能，每页显示20条记录
5: 添加查看证书详情的入口
6: 添加编辑和删除证书的操作按钮
7: 确保列表在桌面浏览器上的基本响应式布局

### Story 3.2 证书详情页基础功能

As a 前端开发人员,
I want 实现证书详情页的基础信息展示,
so that 用户能够查看证书的完整信息.

**Acceptance Criteria:**
1: 实现证书详情页面，展示所有证书元数据
2: 添加证书状态的可视化展示，包括状态图标和颜色标识
3: 实现证书信息的编辑功能，支持修改证书元数据
4: 实现证书删除功能，包括确认对话框
5: 添加返回列表的导航按钮
6: 确保详情页在桌面浏览器上的基本响应式布局
7: 添加表单验证和错误提示

### Story 3.3 基础搜索功能

As a 前端开发人员,
I want 实现基础的证书搜索功能,
so that 用户能够快速找到所需证书.

**Acceptance Criteria:**
1: 实现搜索框组件，支持输入搜索关键词
2: 实现按证书名称和域名的搜索功能
3: 添加搜索按钮，支持手动触发搜索
4: 实现搜索结果的实时展示
5: 添加清除搜索的功能
6: 确保搜索功能的响应时间不超过1秒
7: 在搜索结果中高亮匹配的关键词

### Story 3.4 简化仪表板

As a 前端开发人员,
I want 实现简化的系统仪表板,
so that 用户能够快速了解系统的基本状态.

**Acceptance Criteria:**
1: 实现仪表板页面，展示证书总数和状态分布
2: 添加简单的饼图展示证书状态分布（正常、即将过期、已过期）
3: 展示即将过期证书的列表（7天内到期）
4: 展示最近添加的证书列表
5: 添加快速导航到证书列表的入口
6: 确保仪表板在桌面浏览器上的基本响应式布局
7: 添加仪表板数据的自动刷新功能（每5分钟）

### Story 3.5 基础用户体验优化

As a 前端开发人员,
I want 实现基础的用户体验优化,
so that 提供更加直观和友好的用户界面.

**Acceptance Criteria:**
1: 统一系统的颜色方案和字体样式
2: 添加页面加载状态指示器
3: 实现操作成功的反馈提示
4: 添加表单验证的错误提示
5: 优化按钮和链接的交互效果
6: 确保所有页面的导航一致性
7: 添加基本的页面标题和面包屑导航
8: 实现浏览器后退按钮的支持