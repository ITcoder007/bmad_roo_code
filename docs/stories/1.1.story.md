# Story 1.1: 基础项目结构搭建

## Status
Ready for Review

## Story
**As a** 开发人员,
**I want** 搭建项目的基础结构和框架,
**so that** 为后续功能开发提供基础.

## Acceptance Criteria
1. 创建项目的基本目录结构，包括前端、后端和共享代码目录
2. 搭建基础的Spring Boot后端框架，包括基本配置
3. 搭建基础的Vue.js前端框架，包括路由配置
4. 设置Git版本控制和基本的.gitignore文件
5. 配置基本的构建脚本，支持前端和后端的构建
6. 创建README文件，包含项目说明和基本运行指南

## Tasks / Subtasks
- [x] Task 1: 创建 Monorepo 基础结构 (AC: 1, 4)
  - [x] Subtask 1.1: 创建项目根目录结构按照 `docs/architecture/unified-project-structure.md` 定义
  - [x] Subtask 1.2: 创建 frontend/ 和 backend/ 主目录
  - [x] Subtask 1.3: 创建 docs/, scripts/, infrastructure/ 目录
  - [x] Subtask 1.4: 设置 .gitignore 文件，包含对 node_modules/, target/, .venv/, logs/ 等的忽略规则
  - [x] Subtask 1.5: 初始化 Git 仓库

- [x] Task 2: 搭建 Spring Boot 后端框架 (AC: 2)
  - [x] Subtask 2.1: 创建 Maven 项目配置 (pom.xml)，使用 Spring Boot 2.7.x
  - [x] Subtask 2.2: 配置 Spring Boot 依赖，包括 Spring Security, MyBatis Plus 3.5.x, MySQL Connector 8.0
  - [x] Subtask 2.3: 创建应用入口类 CertificateManagementApplication.java
  - [x] Subtask 2.4: 创建基础包结构：config/, common/, controller/, service/, domain/, infrastructure/
  - [x] Subtask 2.5: 配置 application.yml 和环境特定配置文件 (application-dev.yml, application-prod.yml)
  - [x] Subtask 2.6: 创建数据库配置类 DatabaseConfig.java，配置数据库连接到 cc_bmad_opus_certificate_management
  - [x] Subtask 2.7: 配置日志框架 Logback
  - [x] Subtask 2.8: 创建数据库 cc_bmad_opus_certificate_management（如果不存在）

- [x] Task 3: 搭建 Vue.js 前端框架 (AC: 3)
  - [x] Subtask 3.1: 初始化 Vue 3 项目，使用 Vite 4.x 作为构建工具
  - [x] Subtask 3.2: 安装核心依赖：Vue Router 4.x, Pinia 2.x, Element Plus 2.x, Axios 1.x
  - [x] Subtask 3.3: 创建前端目录结构按照 `docs/architecture/frontend-architecture.md`
  - [x] Subtask 3.4: 配置 Vue Router 基础路由结构
  - [x] Subtask 3.5: 配置 Pinia 状态管理
  - [x] Subtask 3.6: 配置 Element Plus UI 组件库
  - [x] Subtask 3.7: 创建 App.vue 和 main.js 入口文件
  - [x] Subtask 3.8: 配置 ESLint 和 Prettier

- [x] Task 4: 配置构建脚本 (AC: 5)
  - [x] Subtask 4.1: 创建根级别 package.json，配置 monorepo 管理脚本
  - [x] Subtask 4.2: 在 scripts/ 目录创建 build.sh 构建脚本
  - [x] Subtask 4.3: 在 scripts/ 目录创建 setup.sh 环境设置脚本
  - [x] Subtask 4.4: 配置并发启动脚本，支持同时运行前后端开发服务器
  - [x] Subtask 4.5: 创建 Maven 构建配置，支持打包成 JAR

- [x] Task 5: 创建项目文档 (AC: 6)
  - [x] Subtask 5.1: 创建根目录 README.md，包含项目概述、技术栈说明
  - [x] Subtask 5.2: 添加环境要求说明 (JDK 8, Node.js, MySQL 8.0)
  - [x] Subtask 5.3: 添加安装和运行指南
  - [x] Subtask 5.4: 创建 frontend/README.md 和 backend/README.md
  - [x] Subtask 5.5: 添加基本的开发规范说明

- [x] Task 6: 添加单元测试基础设施 (AC: 2, 3)
  - [x] Subtask 6.1: 配置 JUnit 5 和 Mockito 用于后端测试
  - [x] Subtask 6.2: 配置 Jest 和 Vue Test Utils 用于前端测试
  - [x] Subtask 6.3: 创建测试目录结构
  - [x] Subtask 6.4: 添加基础测试配置文件

- [x] Task 7: 服务启动验证测试 (AC: 2, 3, 5)
  - [x] Subtask 7.1: 创建后端启动测试，验证 Spring Boot 应用能成功启动
  - [x] Subtask 7.2: 创建数据库连接测试，验证能成功连接到 MySQL 数据库
  - [x] Subtask 7.3: 创建前端启动测试，验证 Vite 开发服务器能成功启动
  - [x] Subtask 7.4: 创建端到端启动脚本测试，验证 npm run dev 能同时启动前后端
  - [x] Subtask 7.5: 创建健康检查端点 /actuator/health，验证服务运行状态
  - [x] Subtask 7.6: 添加启动验证文档，说明如何验证各服务正常运行

## Dev Notes

### 项目结构信息
基于 [Source: architecture/unified-project-structure.md] 的完整项目结构，需要创建以下主要目录：
- `certificate-lifecycle-management/` 作为项目根目录
- `frontend/` - Vue.js 前端应用
- `backend/` - Spring Boot 后端应用
- `infrastructure/` - Docker 配置文件
- `scripts/` - 构建和部署脚本
- `docs/` - 项目文档

### 技术栈配置
根据 [Source: architecture/tech-stack.md#技术栈表]：

**前端技术栈：**
- JavaScript ES2020+ (不使用 TypeScript，根据技术栈表)
- Vue.js 3.x
- Vue Router 4.x
- Pinia 2.x
- Element Plus 2.x
- Vite 4.x

**后端技术栈：**
- Java 8 (JDK 8)
- Spring Boot 2.7.x
- MyBatis Plus 3.5.x
- MySQL 8.0
- Spring Security + JWT
- Maven 3.8.x
- Logback 1.3.x

### 编码标准
根据 [Source: architecture/coding-standards.md]：
- 前端命名：组件使用 PascalCase，函数使用 camelCase
- 后端命名：类使用 PascalCase，方法使用 camelCase
- 数据库表使用 snake_case
- 常量使用 UPPER_SNAKE_CASE
- 所有 API 路由使用 kebab-case

### 文件位置指导
根据 [Source: architecture/unified-project-structure.md]：

**后端关键文件位置：**
- 应用入口：`backend/src/main/java/com/example/certificate/CertificateManagementApplication.java`
- 配置文件：`backend/src/main/resources/application.yml`
- Maven 配置：`backend/pom.xml`

**前端关键文件位置：**
- 应用入口：`frontend/src/main.js`
- 根组件：`frontend/src/App.vue`
- 路由配置：`frontend/src/router/index.js`
- 状态管理：`frontend/src/stores/index.js`
- Vite 配置：`frontend/vite.config.js`

### Monorepo 管理配置
根据 [Source: architecture/unified-project-structure.md#Monorepo管理工具]：
- 根目录需要 package.json 管理前端工作区
- 使用 concurrently 包支持并发运行前后端
- scripts 目录包含 build.sh, deploy.sh, setup.sh 脚本

### 数据库配置
开发环境数据库连接信息：
- 主机：localhost
- 端口：3306
- 用户名：root
- 密码：root
- 数据库名：cc_bmad_opus_certificate_management
- 字符集：utf8mb4
- 时区：Asia/Shanghai

### Testing
根据 [Source: architecture/testing-strategy.md]：

**测试文件位置：**
- 前端测试：`frontend/tests/` 目录，包含 unit/ 和 e2e/ 子目录
- 后端测试：`backend/src/test/` 目录

**测试框架配置：**
- 前端：Jest + Vue Test Utils 用于单元测试
- 后端：JUnit 5.8.x + Mockito 4.5.x 用于单元测试
- 确保创建基础测试配置文件

**服务启动验证测试场景：**
1. Spring Boot 应用启动测试 - 验证应用上下文能成功加载
2. MySQL 数据库连接测试 - 验证能连接到 cc_bmad_opus_certificate_management 数据库
3. Vite 开发服务器启动测试 - 验证前端服务能在 5173 端口启动
4. 并发启动测试 - 验证 npm run dev 能同时启动前后端服务
5. 健康检查测试 - 验证 /actuator/health 端点返回 UP 状态

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-08-14 | 1.0 | 初始故事创建 | Bob (Scrum Master) |
| 2025-08-14 | 1.1 | 添加数据库配置信息和服务启动验证测试 | Bob (Scrum Master) |

## Dev Agent Record
### Agent Model Used
claude-opus-4-1-20250805

### Debug Log References
- 创建项目基础结构成功
- 后端 Spring Boot 框架搭建完成
- 前端 Vue.js 框架搭建完成
- 构建脚本配置完成
- 测试基础设施搭建完成

### Completion Notes List
- 完成了 Monorepo 结构创建，包括所有必要的目录
- Spring Boot 2.7.18 后端框架配置完成，包括 MyBatis Plus、Spring Security、JWT 等依赖
- Vue 3 + Vite 4 前端框架搭建完成，集成了 Element Plus、Pinia、Vue Router
- 配置了完整的构建和启动脚本
- 添加了前后端测试基础设施
- 创建了完整的项目文档

### File List
**新建文件：**
- /.gitignore
- /package.json
- /README.md
- /backend/pom.xml
- /backend/README.md
- /backend/src/main/java/com/example/certificate/CertificateManagementApplication.java
- /backend/src/main/java/com/example/certificate/config/DatabaseConfig.java
- /backend/src/main/java/com/example/certificate/controller/HealthController.java
- /backend/src/main/resources/application.yml
- /backend/src/main/resources/application-dev.yml
- /backend/src/main/resources/application-prod.yml
- /backend/src/main/resources/logback-spring.xml
- /backend/src/main/resources/db/migration/V1__init_database.sql
- /backend/src/test/java/com/example/certificate/ApplicationStartupTest.java
- /backend/src/test/java/com/example/certificate/DatabaseConnectionTest.java
- /backend/src/test/resources/application-test.yml
- /frontend/package.json
- /frontend/README.md
- /frontend/index.html
- /frontend/vite.config.js
- /frontend/.eslintrc.js
- /frontend/.prettierrc.js
- /frontend/jest.config.js
- /frontend/.babelrc
- /frontend/src/main.js
- /frontend/src/App.vue
- /frontend/src/router/index.js
- /frontend/src/stores/index.js
- /frontend/src/plugins/element-plus.js
- /frontend/src/views/monitoring/Dashboard.vue
- /frontend/src/views/certificate/CertificateList.vue
- /frontend/src/views/certificate/CertificateDetail.vue
- /frontend/src/views/auth/Login.vue
- /frontend/src/views/error/NotFound.vue
- /frontend/tests/mocks/styleMock.js
- /frontend/tests/unit/App.spec.js
- /scripts/build.sh
- /scripts/setup.sh
- /scripts/test-startup.sh
- /docs/startup-validation.md

## QA Results
待QA验证时填写