# 状态管理

## 1. 状态管理架构

```mermaid
graph TB
    subgraph "Pinia Store"
        subgraph "认证状态 (Auth Store)"
            A_User[用户信息]
            A_Token[访问令牌]
            A_Permissions[权限]
        end
        
        subgraph "证书状态 (Certificate Store)"
            C_List[证书列表]
            C_Current[当前证书]
            C_Filter[筛选条件]
            C_Pagination[分页信息]
        end
        
        subgraph "监控状态 (Monitoring Store)"
            M_Logs[监控日志]
            M_Filter[筛选条件]
            M_Pagination[分页信息]
            M_Statistics[统计信息]
        end
        
        subgraph "系统状态 (System Store)"
            S_Config[系统配置]
            S_Status[系统状态]
            S_Notifications[通知]
        end
    end
    
    subgraph "组件"
        CL[证书列表组件]
        CD[证书详情组件]
        CF[证书表单组件]
        D[仪表板组件]
        ML[监控日志组件]
    end
    
    CL --> C_List
    CL --> C_Filter
    CL --> C_Pagination
    
    CD --> C_Current
    
    CF --> C_Current
    
    D --> M_Statistics
    D --> S_Status
    
    ML --> M_Logs
    ML --> M_Filter
    ML --> M_Pagination
    
    CL --> A_Permissions
    CD --> A_Permissions
    CF --> A_Permissions
    D --> A_Permissions
    ML --> A_Permissions
```

## 2. 状态管理设计原则

- **单一数据源**：每个状态在应用中只有一个来源
- **状态只读**：组件不能直接修改状态，必须通过actions修改
- **纯函数修改**：使用纯函数修改状态，确保可预测性
- **模块化**：将状态按功能模块划分，便于管理

## 3. 状态持久化

- **本地存储**：使用localStorage存储用户认证信息和系统配置
- **会话存储**：使用sessionStorage存储临时数据
- **Cookie**：使用Cookie存储认证令牌（可选）
